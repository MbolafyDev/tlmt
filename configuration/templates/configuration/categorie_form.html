{# tmlt/configuration/categorie_form.html #}

{% extends "base.html" %}
{% load widget_tweaks %}

{% block content %}
<div class="container mt-4 mb-5">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-8 col-xl-6">

      <!-- ================= STYLES FORMULAIRE ================= -->
      <style>
      :root {
          --primary-yellow: #ffc107;
          --primary-blue: #0d1b2a;
          --bg-white: #ffffff;
          --bg-light-gray: #f8f9fa;
          --text-dark: #1a1a2e;
          --text-muted: #6c757d;
          --shadow-light: 0 4px 20px rgba(0,0,0,0.08);
          --shadow-hover: 0 8px 25px rgba(0,0,0,0.12);
      }

      h2 {
          color: var(--primary-blue);
          font-weight: 700;
          border-left: 4px solid var(--primary-yellow);
          padding-left: 12px;
          margin-bottom: 2rem;
      }

      .form-card {
          background-color: var(--bg-white);
          padding: 2rem;
          border-radius: 16px;
          box-shadow: var(--shadow-light);
          transition: transform 0.3s, box-shadow 0.3s;
      }
      .form-card:hover {
          transform: translateY(-3px);
          box-shadow: var(--shadow-hover);
      }

      label.form-label {
          font-weight: 600;
          color: var(--primary-blue);
      }

      input.form-control {
          border-radius: 12px;
          border: 1px solid #ced4da;
          padding: 0.5rem;
          transition: all 0.3s;
      }
      input.form-control:focus {
          border-color: var(--primary-yellow);
          box-shadow: 0 0 0 0.2rem rgba(255,193,7,0.25);
      }

      .btn-success {
          background-color: var(--primary-yellow);
          border-color: var(--primary-yellow);
          color: var(--primary-blue);
          border-radius: 50px;
          padding: 0.45rem 1.2rem;
          font-weight: 600;
          transition: all 0.3s;
      }
      .btn-success:hover {
          background-color: #e0a800;
          border-color: #e0a800;
          color: var(--primary-blue);
      }

      .btn-secondary {
          background-color: var(--bg-white);
          border-color: var(--text-muted);
          color: var(--text-dark);
          border-radius: 50px;
          padding: 0.45rem 1.2rem;
          font-weight: 600;
          transition: all 0.3s;
      }
      .btn-secondary:hover {
          background-color: var(--text-muted);
          border-color: var(--text-muted);
          color: var(--bg-white);
      }

      .text-danger {
          font-size: 0.875rem;
      }
      </style>

      <!-- ================= FORMULAIRE ================= -->
      <div class="form-card">
        <h2>{{ title|default:"Ajouter une catégorie" }}</h2>
        <form method="post" novalidate>
          {% csrf_token %}

          {# Si vous utilisez un ModelForm Django, on peut gérer le champ dynamique #}
          {% if form %}
            {% for field in form %}
              <div class="mb-3">
                <label class="form-label" for="{{ field.id_for_label }}">{{ field.label }}</label>
                {% render_field field class="form-control" %}
                {% if field.errors %}
                  <div class="text-danger small">{{ field.errors }}</div>
                {% endif %}
              </div>
            {% endfor %}
          {% else %}
            {# Champ 'nom' statique si pas de form Django #}
            <div class="mb-3">
              <label for="nom" class="form-label">Nom</label>
              <input
                type="text"
                name="nom"
                id="nom"
                class="form-control"
                value="{{ categorie.nom|default:'' }}"
                required
              >
            </div>
          {% endif %}

          <div class="d-flex gap-2">
            <button type="submit" class="btn btn-success">Enregistrer</button>
            <a href="{% url 'categorie_list' %}" class="btn btn-secondary">Annuler</a>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>
{% endblock %}
