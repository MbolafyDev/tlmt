{% extends "base.html" %}
{% load static %}

{% block title %}Mon Profil{% endblock %}

{% block content %}
<section class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="card shadow-sm p-4">
        <h3 class="text-center mb-4">Mon Profil</h3>

        <!-- Avatar + nom complet -->
        <div class="text-center mb-4">
          {% if user.image %}
            <img src="{{ user.image.url }}" alt="Photo de profil" class="rounded-circle shadow-sm" width="100" height="100">
          {% else %}
            <img src="{% static 'images/default.png' %}" alt="Photo de profil" class="rounded-circle shadow-sm" width="100" height="100">
          {% endif %}
          <h5 class="mt-3 mb-0">{{ user.nom_complet|default:user.username }}</h5>
          <small class="text-muted">{{ user.email }}</small>
        </div>

        <hr>

        <!-- Infos principales -->
        <ul class="list-group list-group-flush mb-4">
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span><i class="fa fa-user text-secondary me-2"></i> Nom d’utilisateur</span>
            <strong>{{ user.username }}</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span><i class="fa fa-id-card text-secondary me-2"></i> Nom complet</span>
            <strong>{{ user.nom_complet|default:"Non renseigné" }}</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span><i class="fa fa-envelope text-secondary me-2"></i> Email</span>
            <strong>{{ user.email }}</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span><i class="fa fa-phone text-secondary me-2"></i> Contact</span>
            <strong>{{ user.contact|default:"Non renseigné" }}</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span><i class="fa fa-map-marker-alt text-secondary me-2"></i> Adresse</span>
            <strong>{{ user.adresse|default:"Non renseigné" }}</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span><i class="fa fa-calendar-alt text-secondary me-2"></i> Inscrit le</span>
            <strong>{{ user.date_joined|date:"d/m/Y" }}</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span><i class="fa fa-clock text-secondary me-2"></i> Dernière connexion</span>
            <strong>{{ user.last_login|date:"d/m/Y H:i" }}</strong>
          </li>
        </ul>

        <!-- Boutons -->
        <div class="d-flex flex-column gap-2">
          <a href="{% url 'edit_profile' %}" class="btn btn-primary btn-lg w-100 rounded-pill shadow-sm">
            <i class="fa fa-edit"></i> Modifier mon profil
          </a>
          <a href="{% url 'password_change' %}" class="btn btn-warning btn-lg w-100 rounded-pill shadow-sm">
            <i class="fa fa-key"></i> Changer le mot de passe
          </a>
        </div>

      </div>
    </div>
  </div>
</section>
{% endblock %}
