{% extends "base.html" %}
{% load static %}

{% block title %}Mon Profil{% endblock %}

{% block content %}
<section class="container my-5">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="profile-card shadow-lg p-4 rounded-4 bg-glass">
        <div class="text-center mb-4 position-relative">
          {% if user.image %}
            <img src="{{ user.image.url }}" alt="Photo de profil" 
                 class="rounded-circle profile-avatar border border-4 border-primary-subtle shadow">
          {% else %}
            <img src="{% static 'images/default.png' %}" alt="Photo de profil" 
                 class="rounded-circle profile-avatar border border-4 border-primary-subtle shadow">
          {% endif %}
          <h3 class="mt-3 fw-bold text-gradient mb-0">{{ user.nom_complet|default:user.username }}</h3>
          <small class="text-muted"><i class="fa fa-envelope me-1"></i> {{ user.email }}</small>
        </div>

        <hr class="opacity-50">

        <!-- Liste d'infos utilisateur -->
        <ul class="list-group list-group-flush mb-4">
          <li class="list-group-item d-flex justify-content-between align-items-center border-0 bg-transparent py-2">
            <span><i class="fa fa-user text-primary me-2"></i> Nom d’utilisateur</span>
            <strong>{{ user.username }}</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center border-0 bg-transparent py-2">
            <span><i class="fa fa-id-card text-primary me-2"></i> Nom complet</span>
            <strong>{{ user.nom_complet|default:"Non renseigné" }}</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center border-0 bg-transparent py-2">
            <span><i class="fa fa-envelope text-primary me-2"></i> Email</span>
            <strong>{{ user.email }}</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center border-0 bg-transparent py-2">
            <span><i class="fa fa-phone text-primary me-2"></i> Contact</span>
            <strong>{{ user.contact|default:"Non renseigné" }}</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center border-0 bg-transparent py-2">
            <span><i class="fa fa-map-marker-alt text-primary me-2"></i> Adresse</span>
            <strong>{{ user.adresse|default:"Non renseigné" }}</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center border-0 bg-transparent py-2">
            <span><i class="fa fa-calendar-alt text-primary me-2"></i> Inscrit le</span>
            <strong>{{ user.date_joined|date:"d/m/Y" }}</strong>
          </li>
          <li class="list-group-item d-flex justify-content-between align-items-center border-0 bg-transparent py-2">
            <span><i class="fa fa-clock text-primary me-2"></i> Dernière connexion</span>
            <strong>{{ user.last_login|date:"d/m/Y H:i" }}</strong>
          </li>
        </ul>

        <!-- Boutons -->
        <div class="d-flex flex-column gap-2 mt-4">
          <a href="{% url 'edit_profile' %}" class="btn btn-primary btn-lg w-100 rounded-pill shadow-sm btn-animated">
            <i class="fa fa-edit me-2"></i> Modifier mon profil
          </a>
          <a href="{% url 'password_change' %}" class="btn btn-outline-warning btn-lg w-100 rounded-pill shadow-sm btn-animated">
            <i class="fa fa-key me-2"></i> Changer le mot de passe
          </a>
        </div>

      </div>
    </div>
  </div>
</section>

<style>
/* === DESIGN MODERNISÉ === */
.bg-glass {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.25);
}

.text-gradient {
  background: linear-gradient(90deg, #0d6efd, #6610f2);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.profile-card {
  transition: all 0.3s ease;
}
.profile-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 24px rgba(0,0,0,0.15);
}

.profile-avatar {
  width: 120px;
  height: 120px;
  object-fit: cover;
  transition: transform 0.3s ease;
}
.profile-avatar:hover {
  transform: scale(1.05);
}

.btn-animated {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.btn-animated:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

/* Responsive */
@media (max-width: 768px) {
  .profile-avatar {
    width: 100px;
    height: 100px;
  }
  .profile-card {
    padding: 1.5rem;
  }
}

/* Couleurs douce pour les icônes */
.list-group-item i {
  opacity: 0.8;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // Animation d’apparition du profil
  const card = document.querySelector('.profile-card');
  card.style.opacity = 0;
  card.style.transform = 'translateY(20px)';
  setTimeout(() => {
    card.style.transition = 'all 0.6s ease';
    card.style.opacity = 1;
    card.style.transform = 'translateY(0)';
  }, 100);
});
</script>

{% endblock %}
